[phases.setup]
nixPkgs = ["python311", "curl", "gcc", "stdenv"]

[phases.install]
cmds = [
  "curl -LsSf https://astral.sh/uv/install.sh | sh",
  "export PATH=\"$HOME/.local/bin:$PATH\" && cd app && uv sync"
]

[start]
cmd = "export PATH=\"$HOME/.local/bin:$PATH\" && export LD_LIBRARY_PATH=\"$(nix-build '<nixpkgs>' -A gcc --no-out-link)/lib:$(nix-build '<nixpkgs>' -A gcc.cc.lib --no-out-link)/lib:$LD_LIBRARY_PATH\" && cd app && uv run python agent.py start"

